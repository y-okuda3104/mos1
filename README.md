# mos1 - 居酒屋 POS 注文システム

## 概要
居酒屋向けの客側タッチペネル注文システムのフロントエンド実装です。  
客がメニューを検索・選択してカートに入れ、注文確定すると配膳状況を管理できるシステムです。

## 主な機能

### トップメニュー（top_menu.html）
- 店舗情報表示（店舗名、座席ID、ラストオーダー時刻）
- 座席選択機能（英字1文字-2桁形式：C-05 など）
- スタッフ呼び出し機能（クールダウン抑止あり）
- 注文・メニュー一覧へのナビゲーション

### メニュー一覧（menu_list.html）
- **メニュー表示**：API未応答時はダミー12品を表示
- **検索・絞込**：キーワード検索、カテゴリ絞込
- **ソート**：おすすめ順、カテゴリ順、クイック順
- **カート機能**：
  - 商品を追加・削除可能
  - プラス/マイナスボタンで数量調整
  - localStorage に座席単位で保存
- **注文管理**：
  - 注文確定で「未配膳」として記録
  - 配膳済み/未配膳数をリアルタイム表示
  - 複数座席の注文を独立管理

## 技術スタック
- **フロントエンド**：HTML5 + CSS3 + Vanilla JavaScript（ES6+）
- **ストレージ**：localStorage（ブラウザ側でセッション管理）
- **API連携**：fetch API（フォールバック対応）

## ファイル構成
```
top_menu.html      ... トップメニュー画面
top_menu.css       ... トップメニューのスタイル
top_menu.js        ... トップメニューのロジック（営業時間・座席・呼び出し管理）

menu_list.html     ... メニュー一覧画面
menu_list.css      ... メニュー一覧のスタイル（レスポンシブ対応）
menu_list.js       ... メニュー一覧のロジック（検索・カート・注文管理）

api.js             ... API ユーティリティ（後で実装予定）
README.md          ... このファイル
```

## 座席ID規則
- **形式**：英字1文字＋ハイフン＋2桁数字（例：C-05、A-03）
- **カウンター席**：C-01 ～ C-10
- **1階テーブル**：A-01 ～ A-05
- **2階テーブル**：B-01 ～ B-15

## localStorage キー
各座席ごとに以下の形式でデータを保存：
- `seatId` ... 現在の座席（トップメニューで設定）
- `cart_[座席ID]` ... 当該座席のカート内容
- `orders_[座席ID]` ... 当該座席の注文履歴

## API エンドポイント（実装予定）
- `GET /api/menu?storeId={storeId}` ... メニュー一覧取得
- `GET /api/lo` ... ラストオーダー情報取得（サーバー基準）
- `POST /api/call` ... スタッフ呼び出し

## 既知の制限・今後の改善
- 配膳完了の自動反映未実装（デバッグ用 window.markDelivered() で手動切り替え可能）
- 支払い処理・レジ連携なし
- 画像表示は未実装（プレースホルダーをスキップ）
- リアルタイム同期なし（複数タブ・複数デバイス間の同期は要実装）

## デバッグ方法
ブラウザコンソール（F12 > Console）で以下を実行：
```javascript
// 配膳済みに手動で変更（itemId は注文時の商品ID）
window.markDelivered('m01');

// 注文履歴を確認
console.log(window.__orders);

// カートをリセット
localStorage.clear();
```

## 開発者向けメモ
- 各関数・ロジックにはコメント付き
- localStorage は開発環境での簡易実装のため、本番環境ではサーバーセッション推奨

## レスポンシブ対応

### デバイス別レイアウト
- **デスクトップ（1024px以上）**：グリッド 2 列、標準サイズ UI
- **タブレット（480px～767px）**：グリッド 2 列、中程度の UI
- **スマートフォン（480px以下）**：グリッド 1 列、拡大 UI
  - フォント：18px 以上で自動ズーム回避
  - ボタン・入力欄：min-height 48px で指操作性確保

### スマホ環境での最適化
- 検索バー、セレクト、ボタンは全て 48x48px 以上（Apple ガイドライン相当）
- ミニカート要約と詳細を段組みで表示
- 画像は非表示で読み込み軽減
